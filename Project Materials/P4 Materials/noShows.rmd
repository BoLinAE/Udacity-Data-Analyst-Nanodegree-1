---
title: "Exploratory Data Analysis"
author: "Will Koehrsen"
date: "April 9, 2017"
output: html_document
---
# Introduction to Dataset

I wanted to choose a dataset that was both relatable and could potentially be used to make smarter decisions. Therefore, I decided to work with [medical appointment no shows data available on Kaggle](https://www.kaggle.com/joniarroba/noshowappointments). This dataset is drawn from 300,000 patient visits in Brazil. I wanted to see what factors of an appointment were most strongly correlated with whether or not a patient would show up to their appointment. 
There were a total of 14 variables I included from the original data. The variables are as follows

1. __Age__: integer age of patient
2. __Gender__: M or F
3. __AppointmentReservationDate__: date and time appointment was made
4. __AppointmentDate__: date of appointment without time
5. __DayOfTheWeek__: day of the week of appointment
6. __Status__: Show-up or No-Show
7. __Diabetes__: 0 or 1 for condition
8. __Alcoholism__: 0 or 1 for condition
9. __Hypertension__: 0 or 1 for condition
10. __Smoker__: 0 or 1 for smoker / non-smoker
11. __Scholarship__: 0 or 1 indicating whether the family of the patient takes part in the [Bolsa Familia Program](http://www.worldbank.org/en/news/opinion/2013/11/04/bolsa-familia-Brazil-quiet-revolution), an intiative that provides families with small cash transfers in exchange for keeping children in school and completing health care visits. 
12. __Tuberculosis__: 1 or 0 for condition
13. __SMSReminder__: 0 ,1 ,2 for number of text message reminders
14. __WaitingTime__: integer number of days between when the appointment was made, and when the appointment takes place. 

```{r setup, include=FALSE}

# Set up R markdown
knitr::opts_chunk$set(echo = TRUE)

# Load in required packages
library(ggplot2)
library(dplyr)
library(reshape2)
library(Hmisc)
library(GGally)

# Read in the data
no_shows <- read.csv('noshows.csv')


?rmd

```
Let's take a look at the structure of the data as well as a summary of each variable. 
```{r}
summary(no_shows)
str(no_shows)
```
From the structure of the dataframe, I can see there is a little bit of cleaning that needs to be done. First, I want to change all the categories that are classified as 0 or 1 into factors. This includes the various conditions. Then, I will convert the registration date and the appointment date to date objects. Then, I will add a column of factors for the status where 1 represents a no-show and 0 represents that the patient showed up to the appointment.
I decided not to maintain the time associated the registration data for the apointment. I converted both the appointment registration date and appointment date to simple date objects so I could investigate seasonal and time patterns in the data. 
```{r}
factors = c("Diabetes", "Alcoholism", "Hypertension", "Smoker", "Scholarship", "Tuberculosis")
no_shows[factors] <- lapply(no_shows[factors], factor, levels=c(0,1))
no_shows['Status'] <- lapply(no_shows['Status'], factor, levels=c("Show-Up", "No-Show"), labels = c(0, 1))
no_shows$AppointmentDate <-gsub(pattern = "[A-Z]", replacement = " ", x = no_shows$AppointmentDate)
no_shows$AppointmentRegistrationDate <- gsub(pattern = "[A-Z]", replacement = " ", x = no_shows$AppointmentRegistrationDate)
no_shows$AppointmentDate <- as.Date(no_shows$AppointmentDate)
no_shows$AppointmentRegistrationDate <- as.Date(no_shows$AppointmentRegistrationDate)
str(no_shows)

```
Based on the structure of the dataframe, it looks as if I have all the information I will need. My procedure will mainly consisting of grouping by one variablem, and then finding the average appointment attendance based on that variable. 

